<!--
 coding: utf-8

 maposmatic, the web front-end of the MapOSMatic city map generation system
 Copyright (C) 2009  David Decotigny
 Copyright (C) 2009  Frédéric Lehobey
 Copyright (C) 2009  David Mentré
 Copyright (C) 2009  Maxime Petazzoni
 Copyright (C) 2009  Thomas Petazzoni
 Copyright (C) 2009  Gaël Utard

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Affero General Public License as
 published by the Free Software Foundation, either version 3 of the
 License, or any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU Affero General Public License for more details.

 You should have received a copy of the GNU Affero General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

{% extends "maposmatic/base.html" %}

{% block extrajs %}
function area_selection_mode_switch(mode)
{
  if (mode == 'bbox-mode')
  {
    document.getElementById('admin-mode').style.display = 'none';
    document.getElementById('bbox-mode').style.display = '';
  }
  else if (mode == 'admin-mode')
  {
    document.getElementById('admin-mode').style.display = '';
    document.getElementById('bbox-mode').style.display = 'none';
  }
}

function pageinit()
{
  document.getElementById('id_mode_0').setAttribute('onclick', "area_selection_mode_switch('admin-mode')");
  document.getElementById('id_mode_1').setAttribute('onclick', "area_selection_mode_switch('bbox-mode')");
  if (document.getElementById('id_mode_0').getAttribute('checked') == 'checked')
    area_selection_mode_switch('admin-mode');
  else if (document.getElementById('id_mode_1').getAttribute('checked') == 'checked')
    area_selection_mode_switch('bbox-mode');
}
{% endblock %}

{% block menu-home %}
class="activelink"
{% endblock %}

{% block extrabody %}
onload='pageinit()'
{% endblock %}

{% block page %}
<h1>MapOSMatic</h1>

<h2>Introduction</h2>

<div style="float: right; margin-left: 3em;">
  <table style="text-align: center">
    <tr>
      <td><img src="/smedia/chavagne-small.png"></td>
      <td><img src="/smedia/chavagne_index-small.png"></td>
    </tr>
    <tr>
      <td>
	City Map<br/>
	<a href="/smedia/chavagne.png">PNG</a>&nbsp;-&nbsp;
	<a href="/smedia/chavagne.pdf">PDF</a>&nbsp;-&nbsp;
	<a href="/smedia/chavagne.svg">SVG</a>
      </td>
      <td>
	Streets index<br/>
	<a href="/smedia/chavagne_index.png">PNG</a>&nbsp;-&nbsp;
	<a href="/smedia/chavagne_index.pdf">PDF</a>&nbsp;-&nbsp;
	<a href="/smedia/chavagne_index.svg">SVG</a>
      </td>
    </tr>
  </table>
</div>

<p>MapOSMatic is a free software web service that allows to generate
maps of cities using OpenStreetMap data. A city map is made of two
pages :</p>

<ul>
  <li>the map itself, splitted in squares allowing to easily look for streets;</li>
  <li>an index of the streets with references to the squares on the map.</li>
</ul>

<p>The generated maps are available in PNG, PDF and SVG and are ready
to be printed. Submit your map generation request below, wait a few
minutes and get your own map&nbsp;!</p>

<p style="text-align: right"><a href="/about/">More details</a></p>

<h2>Generate your own map</h2>

<p>For the moment <i>MapOSMatic</i> is only available for the
metropolitan France. We need contributors to translate and adapt the
few parts of <i>MapOSMatic</i> that are country specific.</p>

<p>To select the city to be rendered, two modes are
available&nbsp;:</p>

<ul>
  <li>Using an administrative boundary. These boundaries allow to get
  a map with precise boundaries of the city, but the boundaries are
  for the moment only available for part of the French cities (about a
  third). The name of the provided city must exactly match the one
  available in the OpenStreetMap database (no case or accent
  difference is allowed). Working examples are: <i>Chavagne</i>,
  <i>Bénodet</i> or <i>Sanguinet</i>.</li>
  <li>Using a traditionnal bounding box.</li>
</ul>

<p>Once the rendering is submitted, you will be brought to a page
giving the status of your rendering request. As soon as the rendering
is completed (might take some time depending on the queue length),
this page will contain links to the generated map.</p>

<form method="post" action="">

<table style="margin: auto; border: 1px solid #CCC; padding: 10px;">
  <tr>
    <td width="50%">Title of the map</td>
    <td>{{ form.maptitle }}</td>
    <td>{{ form.maptitle.errors }}</td>
  </tr>
  <tr>
    <td>Area selection mode</td>
    <td>
      {{ form.mode }}
    </td>
  </tr>
  <tr id="admin-mode">
    <td>City name</td>
    <td>{{ form.administrative_city }}</td>
    <td>{{ form.administrative_city.errors }}</td>
  </tr>
  <tr id="bbox-mode" style="display: none;">
    <td>Bounding box</td>
    <td style="text-align: center">
      <input type="text" name="lat_upper_left" style="width: 100px; margin-bottom: 5px;"/>{{ form.lat_upper_left.errors }}<br/>
      <input type="text" name="lon_upper_left"  style="width: 100px; margin-bottom: 5px;"/>{{ form.lon_upper_left.errors }}
      <input type="text" name="lon_bottom_right"  style="width: 100px"/>{{ form.lat_bottom_right.errors }}<br/>
      <input type="text" name="lat_bottom_right"  style="width: 100px"/>{{ form.lon_bottom_right.errors }}
    </td>
  </tr>
  <tr>
    <td></td>
    <td><input type="submit" value="Generate"/></td>
  </tr>
</table>

</form>

{% endblock %}
